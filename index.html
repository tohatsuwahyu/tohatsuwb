<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>WingBend â€“ Mark-Free Forming</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Background image */
    .hero-bg { background: url('images/WingBend-PLUS-Komplett.jpg') center/cover no-repeat; }

    /* Accessible ticker to replace <marquee> */
    .ticker { position: relative; overflow: hidden; }
    .ticker__track { display: inline-block; padding-left: 100%; animation: ticker 20s linear infinite; white-space: nowrap; }
    @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
    @media (prefers-reduced-motion: reduce) {
      .ticker__track { animation: none; transform: none; padding-left: 0; }
    }

    html { scroll-behavior: smooth; }
  </style>
</head>
<body class="bg-gray-50 font-sans antialiased" id="top">

<!-- Header -->
<header class="fixed top-0 inset-x-0 z-50 bg-white/90 backdrop-blur border-b">
  <div class="max-w-6xl mx-auto h-16 px-4 flex items-center justify-between">
    <a href="#top" class="flex items-center gap-2">
      <img src="images/tsh.png" alt="Tokyo Seimitsu Hatsujo logo" class="h-8 w-auto">
      <span class="text-base sm:text-xl font-bold">Tokyo Seimitsu Hatsujo.co.,ltd</span>
    </a>

    <!-- Desktop nav -->
    <nav class="hidden md:flex items-center gap-2">
      <a href="#top" class="menu-link inline-flex items-center px-3 py-1.5 rounded-md bg-gray-200 hover:bg-gray-300 transition" aria-current="page">Home</a>
      <a href="#rfq" class="menu-link inline-flex items-center px-3 py-1.5 rounded-md bg-green-200 hover:bg-green-300 transition">RFQ</a>
      <a href="#askForm" class="menu-link inline-flex items-center px-3 py-1.5 rounded-md bg-blue-200 hover:bg-blue-300 transition">Ask</a>
      <a href="#downloadForm" class="menu-link inline-flex items-center px-3 py-1.5 rounded-md bg-red-200 hover:bg-red-300 transition">Download</a>
      <span class="mx-1 hidden lg:inline">|</span>
      <div class="hidden lg:flex items-center gap-2">
        <button class="lang-btn px-2 py-1 rounded border" data-lang="en" aria-pressed="true">EN</button>
        <button class="lang-btn px-2 py-1 rounded border" data-lang="id" aria-pressed="false">ID</button>
        <button class="lang-btn px-2 py-1 rounded border" data-lang="jp" aria-pressed="false">æ—¥æœ¬èªž</button>
      </div>
    </nav>

    <!-- Mobile menu button -->
    <button id="menuBtn" class="md:hidden inline-flex items-center justify-center p-2 rounded-md border" aria-controls="mobileMenu" aria-expanded="false" aria-label="Open menu">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
    </button>
  </div>

  <!-- Mobile nav -->
  <div id="mobileMenu" class="md:hidden hidden border-t bg-white">
    <div class="max-w-6xl mx-auto px-4 py-3 flex flex-col gap-2">
      <a href="#top" class="menu-link block px-3 py-2 rounded-md bg-gray-200">Home</a>
      <a href="#rfq" class="menu-link block px-3 py-2 rounded-md bg-green-200">RFQ</a>
      <a href="#askForm" class="menu-link block px-3 py-2 rounded-md bg-blue-200">Ask</a>
      <a href="#downloadForm" class="menu-link block px-3 py-2 rounded-md bg-red-200">Download</a>
      <div class="flex items-center gap-2 pt-2">
        <span class="text-sm text-gray-600">Language:</span>
        <button class="lang-btn px-2 py-1 rounded border" data-lang="en">EN</button>
        <button class="lang-btn px-2 py-1 rounded border" data-lang="id">ID</button>
        <button class="lang-btn px-2 py-1 rounded border" data-lang="jp">æ—¥æœ¬èªž</button>
      </div>
    </div>
  </div>
</header>

<!-- Main wrapper (offset for fixed header) -->
<main class="pt-16">

  <!-- Ticker (replaces <marquee>) -->
  <div class="ticker bg-yellow-100 py-2">
    <div id="tickerText" class="ticker__track font-semibold text-red-700">
      Tokyo Seimitsu Hatsujo.co., ltd â€“ Wing Bend / Wing Bend Plus â€“ Redefining Mark-Free Forming
    </div>
  </div>

  <!-- Hero -->
  <section class="relative hero-bg min-h-[60vh] md:min-h-[70vh] lg:min-h-[75vh] flex flex-col items-center justify-center text-center text-white scroll-mt-24">
    <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-black/30"></div>
    <div class="relative z-10 px-4">
      <h2 id="hero-title" class="text-3xl sm:text-4xl md:text-5xl font-extrabold drop-shadow-lg">Mark-Free Forming</h2>
      <p id="hero-desc" class="mt-3 text-base sm:text-lg md:text-xl drop-shadow-lg max-w-2xl mx-auto">
        Beautiful radius and short flanges with minimal marking.
      </p>
      <div class="mt-6 flex flex-col sm:flex-row items-center justify-center gap-3">
        <a href="#rfq" id="hero-cta-rfq" class="inline-block bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg shadow-lg transition w-full sm:w-auto">
          ðŸ’¬ RFQ via WhatsApp
        </a>
        <a href="#downloadForm" class="inline-block bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg shadow-lg transition w-full sm:w-auto">
          ðŸ“¥ Download Catalog
        </a>
      </div>
    </div>
  </section>

  <!-- NEW: RFQ via WhatsApp (short form) -->
  <section id="rfq" class="scroll-mt-24 px-4 py-10">
    <div class="bg-white border shadow-sm rounded-2xl max-w-2xl mx-auto p-6 sm:p-8">
      <div class="flex items-start justify-between gap-4">
        <div>
          <h3 class="text-xl font-bold mb-1" id="rfq-title">RFQ via WhatsApp</h3>
          <p class="text-gray-600" id="rfq-desc">Form singkat. Setelah kirim, sistem akan membuka WhatsApp dengan pesan otomatis.</p>
        </div>
        <a id="rfq-wa-only" href="#" class="hidden sm:inline-flex items-center gap-2 px-3 py-2 rounded-lg border text-green-700 border-green-200 hover:bg-green-50">
          Buka WhatsApp saja
        </a>
      </div>
      <form id="rfqForm" class="mt-5 space-y-4" novalidate>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <div>
            <label class="block text-sm font-medium text-gray-700" for="r-name" id="rfq-name-label">Nama <span class="text-red-500">*</span></label>
            <input id="r-name" name="name" type="text" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500" required>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700" for="r-company" id="rfq-company-label">Perusahaan <span class="text-red-500">*</span></label>
            <input id="r-company" name="company" type="text" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500" required>
          </div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <div>
            <label class="block text-sm font-medium text-gray-700" for="r-usecase" id="rfq-usecase-label">Aplikasi / Use case <span class="text-red-500">*</span></label>
            <input id="r-usecase" name="usecase" type="text" placeholder="Contoh: bending part stainless untuk food-grade" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500" required>
            <p class="text-xs text-gray-500 mt-1" id="rfq-hint">Sebutkan proses/lini atau standar khusus (SNI/TKDN) bila ada.</p>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700" for="r-qty" id="rfq-qty-label">Perkiraan kuantitas <span class="text-red-500">*</span></label>
            <input id="r-qty" name="qty" type="text" placeholder="Mis. 1 set / 500 unit / bulanan" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500" required>
          </div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <div>
            <label class="block text-sm font-medium text-gray-700" for="r-timeline" id="rfq-timeline-label">Target waktu <span class="text-red-500">*</span></label>
            <select id="r-timeline" name="timeline" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500" required>
              <option value="">Pilih...</option>
              <option>Secepatnya (â‰¤ 2 minggu)</option>
              <option>1 bulan</option>
              <option>2â€“3 bulan</option>
              <option>> 3 bulan</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700" for="r-contact" id="rfq-contact-label">Kontak</label>
            <input id="r-contact" name="contact" type="text" placeholder="Nomor WA atau email (opsional)" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500">
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700" for="r-notes" id="rfq-notes-label">Catatan</label>
          <textarea id="r-notes" name="notes" rows="3" placeholder="Opsional: ukuran, material, toleransi, dll." class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
          <button type="submit" id="rfq-submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md">Kirim & buka WhatsApp</button>
          <a id="rfq-wa-only-2" href="#" class="bg-white border border-green-300 hover:bg-green-50 text-green-700 px-4 py-2 rounded-md text-center">Buka WhatsApp saja</a>
        </div>
        <p class="text-xs text-gray-500">Dengan menekan tombol, Anda akan dialihkan ke WhatsApp (Web/app) untuk meneruskan detail RFQ kepada tim Wing Bend.</p>
      </form>
    </div>
  </section>

  <!-- Ask Form (existing) -->
  <section id="askForm" class="scroll-mt-24 px-4 py-10">
    <div class="bg-white border shadow-sm rounded-2xl max-w-xl mx-auto p-6 sm:p-8">
      <h3 class="text-xl font-bold mb-4" id="form-title">Ask About WingBend</h3>
      <form id="questionForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700" for="q-name">Name</label>
          <input id="q-name" type="text" name="name" autocomplete="name" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700" for="q-phone">Phone Number</label>
          <input id="q-phone" type="tel" inputmode="tel" name="phone" autocomplete="tel" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700" for="q-email">Email</label>
          <input id="q-email" type="email" name="email" autocomplete="email" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700" for="q-message">Message</label>
          <textarea id="q-message" name="message" rows="4" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Your question..."></textarea>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
          <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md">Send</button>
          <a href="https://wa.me/818021409299" target="_blank" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-center">WhatsApp</a>
        </div>
      </form>
    </div>
  </section>

  <!-- Download Catalog (existing) -->
  <section id="downloadForm" class="scroll-mt-24 px-4 py-10">
    <div class="text-center max-w-xl mx-auto">
      <h3 class="text-xl font-bold mb-4" id="download-title">Download Catalog</h3>
      <form id="downloadFormElement" class="space-y-4 bg-white border shadow-sm rounded-2xl p-6 sm:p-8 text-left">
        <div>
          <label class="block text-sm font-medium text-gray-700" for="d-name">Name</label>
          <input id="d-name" type="text" name="name" autocomplete="name" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700" for="d-phone">Phone Number</label>
          <input id="d-phone" type="tel" inputmode="tel" name="phone" autocomplete="tel" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700" for="d-email">Email</label>
          <input id="d-email" type="email" name="email" autocomplete="email" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700" for="d-company">Company</label>
          <input id="d-company" type="text" name="company" autocomplete="organization" class="mt-1 w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500" required>
        </div>
        <button type="submit" class="w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md">Submit</button>
      </form>

      <div id="downloadOptions" class="hidden mt-4 grid grid-cols-1 sm:grid-cols-2 gap-2">
        <a href="e catalog.pdf" download class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md block text-center">ðŸ“¥ English Catalog</a>
        <a href="e catalog jp.pdf" download class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-md block text-center">ðŸ“¥ æ—¥æœ¬èªžã‚«ã‚¿ãƒ­ã‚°</a>
      </div>
    </div>
  </section>

</main>

<!-- Footer -->
<footer class="p-4 bg-gray-100 text-center text-sm">
  Â© <span id="yearSpan"></span> Tokyo Seimitsu Hatsujo Co., Ltd. <br>
  Design by Wahyu â€¢ WhatsApp: <span id="waShown"></span>
</footer>

<script>
// ===== Multi-language dictionary (extended for RFQ) =====
function setLang(lang) {
  const dict = {
    en: {
      hero: "Mark-Free Forming",
      desc: "Beautiful radius and short flanges with minimal marking.",
      rfqTitle: "RFQ via WhatsApp",
      rfqDesc: "Short form. After submit, WhatsApp opens with a prefilled message.",
      rfqOpenOnly: "Open WhatsApp only",
      rfqBtnSubmit: "Send & open WhatsApp",
      rfqBtnOnly: "Open WhatsApp only",
      rfqName: "Name",
      rfqCompany: "Company",
      rfqUsecase: "Application / Use case",
      rfqQty: "Estimated quantity",
      rfqTimeline: "Target timing",
      rfqContact: "Contact",
      rfqNotes: "Notes",
      rfqHint: "Mention line/process or standards (SNI/TKDN) if any.",
      form: "Ask About WingBend",
      download: "Download Catalog",
      ticker: "Tokyo Seimitsu Hatsujo.co., ltd â€“ Wing Bend / Wing Bend Plus â€“ Redefining Mark-Free Forming",
      heroCtaRfq: "ðŸ’¬ RFQ via WhatsApp",
      heroCtaDl: "ðŸ“¥ Download Catalog"
    },
    id: {
      hero: "Bebas Bekas Tekukan",
      desc: "Radius indah dan flange pendek tanpa bekas.",
      rfqTitle: "RFQ via WhatsApp",
      rfqDesc: "Form singkat. Setelah kirim, WhatsApp akan terbuka dengan pesan otomatis.",
      rfqOpenOnly: "Buka WhatsApp saja",
      rfqBtnSubmit: "Kirim & buka WhatsApp",
      rfqBtnOnly: "Buka WhatsApp saja",
      rfqName: "Nama",
      rfqCompany: "Perusahaan",
      rfqUsecase: "Aplikasi / Use case",
      rfqQty: "Perkiraan kuantitas",
      rfqTimeline: "Target waktu",
      rfqContact: "Kontak",
      rfqNotes: "Catatan",
      rfqHint: "Sebutkan lini/proses atau standar (SNI/TKDN) bila ada.",
      form: "Tanya tentang WingBend",
      download: "Unduh Katalog",
      ticker: "Tokyo Seimitsu Hatsujo.co., ltd â€“ Wing Bend / Wing Bend Plus â€“ Membengkokkan tanpa bekas",
      heroCtaRfq: "ðŸ’¬ RFQ via WhatsApp",
      heroCtaDl: "ðŸ“¥ Unduh Katalog"
    },
    jp: {
      hero: "ã‚¦ã‚£ãƒ³ã‚°ãƒ™ãƒ³ãƒ‰ãƒ»ã‚¦ã‚£ãƒ³ã‚°ãƒ™ãƒ³ãƒ‰ãƒ—ãƒ©ã‚¹",
      desc: "ç¾Žã—ã„Rã¨çŸ­ã„ãƒ•ãƒ©ãƒ³ã‚¸ã‚’æœ€å°é™ã®ã‚­ã‚ºã§å½¢æˆã€‚",
      rfqTitle: "WhatsAppã§RFQ",
      rfqDesc: "ç°¡æ˜“ãƒ•ã‚©ãƒ¼ãƒ ã€‚é€ä¿¡å¾Œã€å†…å®¹å…¥ã‚Šã®WhatsAppãŒé–‹ãã¾ã™ã€‚",
      rfqOpenOnly: "WhatsAppã®ã¿é–‹ã",
      rfqBtnSubmit: "é€ä¿¡ã—ã¦WhatsAppã‚’é–‹ã",
      rfqBtnOnly: "WhatsAppã®ã¿é–‹ã",
      rfqName: "ãŠåå‰",
      rfqCompany: "ä¼šç¤¾å",
      rfqUsecase: "ç”¨é€” / ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹",
      rfqQty: "æ¦‚ç®—æ•°é‡",
      rfqTimeline: "å¸Œæœ›æ™‚æœŸ",
      rfqContact: "é€£çµ¡å…ˆ",
      rfqNotes: "ãƒ¡ãƒ¢",
      rfqHint: "ãƒ©ã‚¤ãƒ³/ãƒ—ãƒ­ã‚»ã‚¹ã‚„è¦æ ¼ï¼ˆSNI/TKDNï¼‰ãŒã‚ã‚Œã°è¨˜è¼‰ãã ã•ã„ã€‚",
      form: "WingBendå•ã„åˆã‚ã›",
      download: "ã‚«ã‚¿ãƒ­ã‚°ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
      ticker: "æ±äº¬ç²¾å¯†ç™ºæ¢æ ªå¼ä¼šç¤¾ â€“ ã‚¦ã‚£ãƒ³ã‚°ãƒ™ãƒ³ãƒ‰ãƒ»ã‚¦ã‚£ãƒ³ã‚°ãƒ™ãƒ³ãƒ‰ãƒ—ãƒ©ã‚¹ â€“ Mark-Free Forming",
      heroCtaRfq: "ðŸ’¬ WhatsAppã§RFQ",
      heroCtaDl: "ðŸ“¥ ã‚«ã‚¿ãƒ­ã‚°ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰"
    }
  };
  const cur = dict[lang] || dict.en;
  document.getElementById('hero-title').innerText = cur.hero;
  document.getElementById('hero-desc').innerText = cur.desc;
  document.getElementById('form-title').innerText = cur.form;
  document.getElementById('download-title').innerText = cur.download;
  document.getElementById('tickerText').innerText = cur.ticker;
  document.getElementById('rfq-title').innerText = cur.rfqTitle;
  document.getElementById('rfq-desc').innerText = cur.rfqDesc;
  document.getElementById('rfq-name-label').firstChild.textContent = cur.rfqName + ' ';
  document.getElementById('rfq-company-label').firstChild.textContent = cur.rfqCompany + ' ';
  document.getElementById('rfq-usecase-label').firstChild.textContent = cur.rfqUsecase + ' ';
  document.getElementById('rfq-qty-label').firstChild.textContent = cur.rfqQty + ' ';
  document.getElementById('rfq-timeline-label').firstChild.textContent = cur.rfqTimeline + ' ';
  document.getElementById('rfq-contact-label').textContent = cur.rfqContact;
  document.getElementById('rfq-notes-label').textContent = cur.rfqNotes;
  document.getElementById('rfq-hint').textContent = cur.rfqHint;
  document.getElementById('rfq-submit').textContent = cur.rfqBtnSubmit;
  document.getElementById('rfq-wa-only').textContent = cur.rfqOpenOnly;
  document.getElementById('rfq-wa-only-2').textContent = cur.rfqBtnOnly;
  document.getElementById('hero-cta-rfq').textContent = cur.heroCtaRfq;
  // Save & reflect active language buttons
  localStorage.setItem('lang', lang);
  document.querySelectorAll('.lang-btn').forEach(btn => {
    const active = btn.dataset.lang === lang;
    btn.setAttribute('aria-pressed', active ? 'true' : 'false');
    btn.classList.toggle('bg-gray-900', active);
    btn.classList.toggle('text-white', active);
  });
}

// ---- Google Apps Script endpoint ----
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwy9I8eJrigp0lo5KrkiPCjHvTWaZgrGoinin14A8TX8f-in5qfBfqfBwhWRqeRif-z/exec";

// ---- WhatsApp config ----
const PHONE_E164 = "818021409299"; // GANTI nomor bisnis Anda (tanpa +, tanpa 0 di depan)
const DEFAULT_GREETING = "Halo Tokyo Seimitsu Hatsujo, saya ingin mengirim RFQ Wing Bend.";

function buildMessage(data){
  const lines = [
    "RFQ â€” Wing Bend",
    `Nama: ${data.name || '-'}`,
    `Perusahaan: ${data.company || '-'}`,
    `Aplikasi: ${data.usecase || '-'}`,
    `Qty: ${data.qty || '-'}`,
    `Target waktu: ${data.timeline || '-'}`,
    `Kontak: ${data.contact || '-'}`,
    data.notes ? `Catatan: ${data.notes}` : null
  ].filter(Boolean);
  return lines.join('\n');
}
function waUrl(text){ return `https://wa.me/${PHONE_E164}?text=${encodeURIComponent(text)}`; }

// ---- Question form: save to Google Sheet + open email client ----
const qForm = document.getElementById('questionForm');
qForm.addEventListener('submit', e => {
  e.preventDefault();
  const form = e.target;
  fetch(SCRIPT_URL, { method: 'POST', body: new FormData(form) })
    .then(() => console.log('âœ… Question saved'))
    .catch(() => console.warn('âŒ Failed to save question'));
  const subject = 'WingBend Inquiry from ' + form.name.value;
  const body = `Name: ${form.name.value}\nPhone: ${form.phone.value}\nEmail: ${form.email.value}\nMessage: ${form.message.value}`;
  window.location.href = `mailto:wahyu@to-hatsu.co.jp?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
});

// ---- Download form: save to Google Sheet + show EN/JP ----
const dlForm = document.getElementById('downloadFormElement');
dlForm.addEventListener('submit', e => {
  e.preventDefault();
  const form = e.target;
  fetch(SCRIPT_URL, { method: 'POST', body: new FormData(form) })
    .then(() => {
      document.getElementById('downloadOptions').classList.remove('hidden');
      alert('âœ… Data submitted. Please choose catalog language.');
    })
    .catch(() => alert('âŒ Failed to submit data.'));
});

// ---- RFQ form: save (optional) + open WhatsApp ----
const rfqForm = document.getElementById('rfqForm');
rfqForm.addEventListener('submit', e => {
  e.preventDefault();
  const data = {
    name: document.getElementById('r-name').value.trim(),
    company: document.getElementById('r-company').value.trim(),
    usecase: document.getElementById('r-usecase').value.trim(),
    qty: document.getElementById('r-qty').value.trim(),
    timeline: document.getElementById('r-timeline').value,
    contact: document.getElementById('r-contact').value.trim(),
    notes: document.getElementById('r-notes').value.trim(),
    utm: Object.fromEntries(new URLSearchParams(location.search))
  };
  if(!data.name || !data.company || !data.usecase || !data.qty || !data.timeline){
    alert('Lengkapi kolom wajib terlebih dahulu.');
    return;
  }
  // Save to Google Sheet (non-blocking)
  const fd = new FormData();
  Object.entries({
    source: 'LP-RFQ-WhatsApp',
    ...data
  }).forEach(([k,v]) => fd.append(k, typeof v === 'string' ? v : JSON.stringify(v)));
  fetch(SCRIPT_URL, { method: 'POST', body: fd }).catch(()=>{});

  const text = buildMessage(data);
  window.location.href = waUrl(text);
});

// RFQ: open WA only buttons
['rfq-wa-only','rfq-wa-only-2'].forEach(id => {
  const el = document.getElementById(id);
  el.addEventListener('click', (e)=>{ e.preventDefault(); window.location.href = waUrl(DEFAULT_GREETING); });
});

// ---- Mobile menu toggle ----
const menuBtn = document.getElementById('menuBtn');
const mobileMenu = document.getElementById('mobileMenu');
menuBtn.addEventListener('click', () => {
  const willOpen = mobileMenu.classList.contains('hidden');
  mobileMenu.classList.toggle('hidden');
  menuBtn.setAttribute('aria-expanded', willOpen ? 'true' : 'false');
});

// ---- Language button handlers (desktop + mobile) ----
document.addEventListener('click', (e) => {
  const btn = e.target.closest('.lang-btn');
  if (!btn) return;
  setLang(btn.dataset.lang);
});

// ---- Highlight active menu during scroll (desktop + mobile links) ----
const sections = document.querySelectorAll('section[id]');
const menuLinks = document.querySelectorAll('.menu-link');
const setActive = (id) => {
  menuLinks.forEach(link => {
    const on = link.getAttribute('href') === '#' + id;
    link.setAttribute('aria-current', on ? 'page' : 'false');
    link.classList.toggle('ring-2', on);
    link.classList.toggle('ring-offset-2', on);
  });
};
const io = new IntersectionObserver((entries) => {
  entries.forEach(entry => { if (entry.isIntersecting) setActive(entry.target.id); });
}, { rootMargin: '-25% 0px -60% 0px', threshold: 0.1 });
sections.forEach(sec => io.observe(sec));

// ---- Init: year + saved language + show WA ----
document.getElementById('yearSpan').textContent = new Date().getFullYear();
document.getElementById('waShown').textContent = '+' + PHONE_E164;
setLang(localStorage.getItem('lang') || 'en');
</script>

</body>
</html>
